# ğŸ—ï¸ Authentication Architecture

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        NEXT.JS APPLICATION                           â”‚
â”‚                         (Port 3000)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                         â”‚                         â”‚
        â”‚                         â”‚                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FRONTEND     â”‚       â”‚   API ROUTES    â”‚      â”‚   DATABASE     â”‚
â”‚   (Client)     â”‚       â”‚   (Backend)     â”‚      â”‚   (MongoDB)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

## Detailed Component Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          CLIENT LAYER                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚   Navbar     â”‚  â”‚  Sign Up     â”‚  â”‚   Sign In    â”‚                 â”‚
â”‚  â”‚  Component   â”‚  â”‚    Page      â”‚  â”‚     Page     â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚         â”‚                 â”‚                  â”‚                          â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                           â”‚                                             â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚                  â”‚  SessionProvider  â”‚  (next-auth/react)               â”‚
â”‚                  â”‚   useSession()    â”‚                                  â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                           â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTP Requests
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API LAYER (Backend)                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           â”‚                                             â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚         â”‚                                   â”‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ /api/auth/      â”‚            â”‚ /api/auth/signup  â”‚                 â”‚
â”‚  â”‚ [...nextauth]   â”‚            â”‚                   â”‚                 â”‚
â”‚  â”‚                 â”‚            â”‚  - Validate data  â”‚                 â”‚
â”‚  â”‚ NextAuth.js     â”‚            â”‚  - Hash password  â”‚                 â”‚
â”‚  â”‚ Configuration   â”‚            â”‚  - Create user    â”‚                 â”‚
â”‚  â”‚                 â”‚            â”‚  - Return success â”‚                 â”‚
â”‚  â”‚ Providers:      â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚  â”‚ - Credentials   â”‚                       â”‚                          â”‚
â”‚  â”‚ - Google OAuth  â”‚                       â”‚                          â”‚
â”‚  â”‚                 â”‚                       â”‚                          â”‚
â”‚  â”‚ Callbacks:      â”‚                       â”‚                          â”‚
â”‚  â”‚ - signIn()      â”‚                       â”‚                          â”‚
â”‚  â”‚ - jwt()         â”‚                       â”‚                          â”‚
â”‚  â”‚ - session()     â”‚                       â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚                          â”‚
â”‚           â”‚                                â”‚                          â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                        â”‚                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ MongoDB Queries
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  DATABASE LAYER                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        â”‚                                               â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚              â”‚  MongoDB Atlas   â”‚                                      â”‚
â”‚              â”‚                  â”‚                                      â”‚
â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                      â”‚
â”‚              â”‚  â”‚   Users    â”‚  â”‚                                      â”‚
â”‚              â”‚  â”‚ Collection â”‚  â”‚                                      â”‚
â”‚              â”‚  â”‚            â”‚  â”‚                                      â”‚
â”‚              â”‚  â”‚ Fields:    â”‚  â”‚                                      â”‚
â”‚              â”‚  â”‚ - _id      â”‚  â”‚                                      â”‚
â”‚              â”‚  â”‚ - name     â”‚  â”‚                                      â”‚
â”‚              â”‚  â”‚ - email    â”‚  â”‚                                      â”‚
â”‚              â”‚  â”‚ - password â”‚  â”‚                                      â”‚
â”‚              â”‚  â”‚ - provider â”‚  â”‚                                      â”‚
â”‚              â”‚  â”‚ - googleId â”‚  â”‚                                      â”‚
â”‚              â”‚  â”‚ - image    â”‚  â”‚                                      â”‚
â”‚              â”‚  â”‚ - createdAtâ”‚  â”‚                                      â”‚
â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                      â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Authentication Flow with NextAuth

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Email/Password Sign Up Flow                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    User                    Frontend              API Routes          Database
     â”‚                         â”‚                       â”‚                 â”‚
     â”‚  Fill signup form       â”‚                       â”‚                 â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚                 â”‚
     â”‚                         â”‚                       â”‚                 â”‚
     â”‚                         â”‚  POST /api/auth/signupâ”‚                 â”‚
     â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚
     â”‚                         â”‚                       â”‚                 â”‚
     â”‚                         â”‚                       â”‚  Check email    â”‚
     â”‚                         â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                         â”‚                       â”‚                 â”‚
     â”‚                         â”‚                       â”‚  Email unique?  â”‚
     â”‚                         â”‚                       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                         â”‚                       â”‚                 â”‚
     â”‚                         â”‚                       â”‚  Hash password  â”‚
     â”‚                         â”‚                       â”‚  (bcrypt)       â”‚
     â”‚                         â”‚                       â”‚                 â”‚
     â”‚                         â”‚                       â”‚  Create user    â”‚
     â”‚                         â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                         â”‚                       â”‚                 â”‚
     â”‚                         â”‚                       â”‚  User created   â”‚
     â”‚                         â”‚                       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                         â”‚                       â”‚                 â”‚
     â”‚                         â”‚  Success response     â”‚                 â”‚
     â”‚                         â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
     â”‚                         â”‚                       â”‚                 â”‚
     â”‚                         â”‚  signIn('credentials')â”‚                 â”‚
     â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚
     â”‚                         â”‚                       â”‚                 â”‚
     â”‚                         â”‚  JWT Session Token    â”‚                 â”‚
     â”‚                         â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
     â”‚                         â”‚  (HTTP-only cookie)   â”‚                 â”‚
     â”‚  Redirect to home       â”‚                       â”‚                 â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                 â”‚
     â”‚  (Logged in)            â”‚                       â”‚                 â”‚
     â”‚                         â”‚                       â”‚                 â”‚

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Email/Password Sign In Flow                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    User                    Frontend              NextAuth            Database
     â”‚                         â”‚                       â”‚                 â”‚
     â”‚  Enter credentials      â”‚                       â”‚                 â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚                 â”‚
     â”‚                         â”‚                       â”‚                 â”‚
     â”‚                         â”‚  signIn('credentials')â”‚                 â”‚
     â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚
     â”‚                         â”‚                       â”‚                 â”‚
     â”‚                         â”‚                       â”‚  Find user      â”‚
     â”‚                         â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                         â”‚                       â”‚                 â”‚
     â”‚                         â”‚                       â”‚  User data      â”‚
     â”‚                         â”‚                       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                         â”‚                       â”‚                 â”‚
     â”‚                         â”‚                       â”‚  Compare        â”‚
     â”‚                         â”‚                       â”‚  password       â”‚
     â”‚                         â”‚                       â”‚  (bcrypt)       â”‚
     â”‚                         â”‚                       â”‚                 â”‚
     â”‚                         â”‚                       â”‚  Valid?         â”‚
     â”‚                         â”‚                       â”‚  âœ“ Yes          â”‚
     â”‚                         â”‚                       â”‚                 â”‚
     â”‚                         â”‚                       â”‚  Generate JWT   â”‚
     â”‚                         â”‚                       â”‚  Create session â”‚
     â”‚                         â”‚                       â”‚                 â”‚
     â”‚                         â”‚  Session + JWT Cookie â”‚                 â”‚
     â”‚                         â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
     â”‚                         â”‚                       â”‚                 â”‚
     â”‚  Redirect to home       â”‚                       â”‚                 â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                 â”‚
     â”‚  (Logged in)            â”‚                       â”‚                 â”‚
     â”‚                         â”‚                       â”‚                 â”‚

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Google OAuth Sign In Flow                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  User          Frontend        NextAuth        Google OAuth      Database
   â”‚                â”‚               â”‚                 â”‚               â”‚
   â”‚  Click Google  â”‚               â”‚                 â”‚               â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚                 â”‚               â”‚
   â”‚                â”‚               â”‚                 â”‚               â”‚
   â”‚                â”‚  signIn('google')                â”‚               â”‚
   â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚               â”‚
   â”‚                â”‚               â”‚                 â”‚               â”‚
   â”‚                â”‚               â”‚  Redirect to    â”‚               â”‚
   â”‚                â”‚               â”‚  Google OAuth   â”‚               â”‚
   â”‚                â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
   â”‚                â”‚               â”‚                 â”‚               â”‚
   â”‚  Google Consent Screen         â”‚                 â”‚               â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚               â”‚
   â”‚                                 â”‚                 â”‚               â”‚
   â”‚  User authorizes                â”‚                 â”‚               â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
   â”‚                                 â”‚                 â”‚               â”‚
   â”‚                                 â”‚  User profile   â”‚               â”‚
   â”‚                                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
   â”‚                                 â”‚                 â”‚               â”‚
   â”‚                                 â”‚  Check if user exists           â”‚
   â”‚                                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                                 â”‚                 â”‚               â”‚
   â”‚                                 â”‚  User exists?   â”‚               â”‚
   â”‚                                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                                 â”‚                 â”‚               â”‚
   â”‚                                 â”‚  Create/Update user             â”‚
   â”‚                                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                                 â”‚                 â”‚               â”‚
   â”‚                                 â”‚  Success        â”‚               â”‚
   â”‚                                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                                 â”‚                 â”‚               â”‚
   â”‚                                 â”‚  Generate JWT   â”‚               â”‚
   â”‚                                 â”‚  Create session â”‚               â”‚
   â”‚                                 â”‚                 â”‚               â”‚
   â”‚                 Session Cookie  â”‚                 â”‚               â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚               â”‚
   â”‚                                 â”‚                 â”‚               â”‚
   â”‚  Redirect to home (Logged in)   â”‚                 â”‚               â”‚
   â”‚                                 â”‚                 â”‚               â”‚
```

## Session Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Session Lifecycle                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Login Success
     â”‚
     â”œâ”€â”€> NextAuth generates JWT token
     â”‚
     â”œâ”€â”€> Token contains:
     â”‚    - User ID
     â”‚    - User email
     â”‚    - Provider type
     â”‚    - Expiration (30 days)
     â”‚
     â”œâ”€â”€> Token stored in HTTP-only cookie
     â”‚    - Name: next-auth.session-token
     â”‚    - Secure: true (in production)
     â”‚    - HttpOnly: true
     â”‚    - SameSite: lax
     â”‚
     â””â”€â”€> Client receives session

Subsequent Requests
     â”‚
     â”œâ”€â”€> Browser automatically sends cookie
     â”‚
     â”œâ”€â”€> NextAuth validates JWT
     â”‚
     â”œâ”€â”€> If valid: Continue
     â”‚
     â””â”€â”€> If expired: Redirect to /signin

Logout
     â”‚
     â”œâ”€â”€> signOut() called
     â”‚
     â”œâ”€â”€> JWT cookie deleted
     â”‚
     â”œâ”€â”€> Session cleared
     â”‚
     â””â”€â”€> User logged out
```

## Database Schema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           User Schema                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User {
  _id: ObjectId                    // MongoDB auto-generated
  name: String (required)          // User's full name
  email: String (required, unique) // Email address
  password: String (hashed)        // Bcrypt hashed password
  image: String                    // Profile picture URL
  provider: String                 // 'credentials' or 'google'
  googleId: String (unique)        // Google account ID
  emailVerified: Date              // Email verification date
  isActive: Boolean                // Account status
  createdAt: Date                  // Auto-generated timestamp
  updatedAt: Date                  // Auto-generated timestamp
}

Indexes:
- email (unique)
- googleId (unique, sparse)

Middleware:
- Pre-save: Hash password with bcrypt
- Methods: comparePassword(candidatePassword)
```

## Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Security Architecture                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 1: Client-Side Validation
â”œâ”€ Form validation (password match, length)
â”œâ”€ Email format validation
â””â”€ Required fields check

Layer 2: API Route Validation
â”œâ”€ Input sanitization
â”œâ”€ Email uniqueness check
â”œâ”€ Password complexity rules
â””â”€ Request rate limiting (can be added)

Layer 3: Authentication
â”œâ”€ Bcrypt password hashing (10 salt rounds)
â”œâ”€ Secure password comparison
â”œâ”€ JWT token generation
â””â”€ Session validation

Layer 4: Session Security
â”œâ”€ HTTP-only cookies
â”œâ”€ Secure flag (HTTPS in production)
â”œâ”€ SameSite attribute
â””â”€ 30-day expiration

Layer 5: Database Security
â”œâ”€ Connection string in environment variables
â”œâ”€ Mongoose schema validation
â”œâ”€ Indexed fields for performance
â””â”€ Password field excluded from queries by default

Layer 6: OAuth Security
â”œâ”€ Google OAuth 2.0 implementation
â”œâ”€ State parameter for CSRF protection
â”œâ”€ Secure token exchange
â””â”€ Token validation
```

## File Structure with Data Flow

```
ai-detector/
â”‚
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.jsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â”‚                        â”‚ Wraps entire app
â”‚   â”œâ”€â”€ providers.jsx â”€â”€â”€â”€â”€â”€â”€â”˜ with SessionProvider
â”‚   â”‚
â”‚   â”œâ”€â”€ signup/
â”‚   â”‚   â””â”€â”€ page.jsx â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â”‚                        â”œâ”€> POST /api/auth/signup
â”‚   â”œâ”€â”€ signin/              â”‚   â”œâ”€> MongoDB (create user)
â”‚   â”‚   â””â”€â”€ page.jsx â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â””â”€> NextAuth (auto login)
â”‚   â”‚                        â”‚
â”‚   â”œâ”€â”€ components/          â”‚
â”‚   â”‚   â””â”€â”€ Navbar.jsx â”€â”€â”€â”€â”€â”€â”¤
â”‚   â”‚                        â”œâ”€> useSession() hook
â”‚   â”‚                        â””â”€> Display user info
â”‚   â”‚
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ auth/
â”‚           â”œâ”€â”€ [...nextauth]/
â”‚           â”‚   â””â”€â”€ route.js â”€â”€â”
â”‚           â”‚                  â”œâ”€> NextAuth configuration
â”‚           â”‚                  â”œâ”€> Providers setup
â”‚           â”‚                  â”œâ”€> Callbacks
â”‚           â”‚                  â””â”€> MongoDB queries
â”‚           â”‚
â”‚           â””â”€â”€ signup/
â”‚               â””â”€â”€ route.js â”€â”€â”
â”‚                              â”œâ”€> Validate input
â”‚                              â”œâ”€> Create user
â”‚                              â””â”€> Hash password
â”‚
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ mongodb.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             â”œâ”€> Database connection
â”‚                             â””â”€> Connection caching
â”‚
â”œâ”€â”€ models/
â”‚   â””â”€â”€ User.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             â”œâ”€> Schema definition
â”‚                             â”œâ”€> Password hashing
â”‚                             â””â”€> comparePassword()
â”‚
â””â”€â”€ middleware.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â””â”€> Route protection (optional)
```

## Technology Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Technology Overview                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  Frontend:                                                           â”‚
â”‚  â”œâ”€ Next.js 14 (App Router)                                         â”‚
â”‚  â”œâ”€ React 18                                                         â”‚
â”‚  â”œâ”€ Tailwind CSS                                                     â”‚
â”‚  â”œâ”€ Framer Motion                                                    â”‚
â”‚  â””â”€ Lucide React (Icons)                                            â”‚
â”‚                                                                      â”‚
â”‚  Authentication:                                                     â”‚
â”‚  â”œâ”€ NextAuth.js 4.x                                                 â”‚
â”‚  â”œâ”€ JWT (JSON Web Tokens)                                           â”‚
â”‚  â””â”€ OAuth 2.0 (Google)                                              â”‚
â”‚                                                                      â”‚
â”‚  Backend:                                                            â”‚
â”‚  â”œâ”€ Next.js API Routes                                              â”‚
â”‚  â”œâ”€ Node.js Runtime                                                 â”‚
â”‚  â””â”€ RESTful API Design                                              â”‚
â”‚                                                                      â”‚
â”‚  Database:                                                           â”‚
â”‚  â”œâ”€ MongoDB Atlas                                                    â”‚
â”‚  â”œâ”€ Mongoose ODM                                                     â”‚
â”‚  â””â”€ NoSQL Document Store                                            â”‚
â”‚                                                                      â”‚
â”‚  Security:                                                           â”‚
â”‚  â”œâ”€ Bcrypt.js (Password Hashing)                                    â”‚
â”‚  â”œâ”€ HTTP-only Cookies                                               â”‚
â”‚  â”œâ”€ CSRF Protection                                                 â”‚
â”‚  â””â”€ Environment Variables                                           â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Production Deployment                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         User's Browser
               â”‚
               â”‚ HTTPS
               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Vercel     â”‚  (or any hosting platform)
        â”‚   CDN/Edge   â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ Server-Side Rendering
               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Next.js App        â”‚
        â”‚   - SSR              â”‚
        â”‚   - API Routes       â”‚
        â”‚   - NextAuth         â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ Database Connection
               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   MongoDB Atlas      â”‚
        â”‚   - Managed Database â”‚
        â”‚   - Auto-scaling     â”‚
        â”‚   - Backups          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Environment Variables (Vercel Dashboard):
- MONGODB_URI
- NEXTAUTH_SECRET
- NEXTAUTH_URL
- GOOGLE_CLIENT_ID
- GOOGLE_CLIENT_SECRET
```

---

This architecture provides:
- âœ… Scalability (MongoDB Atlas auto-scales)
- âœ… Security (Multiple security layers)
- âœ… Performance (Edge caching, JWT sessions)
- âœ… Maintainability (Clean separation of concerns)
- âœ… Extensibility (Easy to add new features)

